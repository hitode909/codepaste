%h2= "downloading #{ @file.name }"
%link{ :rel => "download", :href => @file.path("blob") }
%h3.status waiting observer.

-# from MozRepl
-# (content.document.querySelector('link[rel=\"download\"]') || {}).href
-# content.wrappedJSObject.start()
-# content.wrappedJSObject.finish()

:javascript
  function start() {
    $(".status").text("downloading file.");
  }
  function finish() {
      $(".status").text("finished.");
      setTimeout(function(){
        location.href = "#{ @file.path }";
      }, 1000);
  };
